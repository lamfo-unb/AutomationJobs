---
output:
  html_document:
      css: style.css
bibliography: bibliography.bib
csl: apa.csl
lang: pt
link-citations: true
# nocite: "@*"
---

<div class="center">

<img src="Logo2.png" style="float: left; width: 30%;height: auto;" hspace="20px;">
<div class="title2">
  <p class="title">Laboratório de Aprendizado de Máquina em Finanças e Organizações</p>
  <p class="alignright"> <a href="http://lamfo.unb.br/">http://lamfo.unb.br </a> </p>
</div>


<p class="main">
Automação e eliminação de postos de trabalho na era da automação
</p>


<div class="row">
<div class="column">
<h2>Pedro Albuquerque</h2>
<p>Universidade de Brasília</p>
</div>
<div class="column">
<h2>Patrick Alves</h2>
<p>Instituto de Pesquisa Econômica Aplicada</p>
</div>
<div class="column">
<h2>Rafael Morais</h2>
<p>Universidade de Brasília</p>
</div>
<div class="column">
<h2>Cayan Portela</h2>
<p>Universidade de Brasília</p>
</div>
</div>

<div class="abstract">
<p style="text-align: center;font-weight: bold;font-size: 25px;"> Resumo </p>
<p style="width: 80%;position: relative;right: -10%;">
The abstract of the article.The abstract of the article.The abstract of the article.The abstract of the article.The abstract of the article.The abstract of the article.The abstract of the article.The abstract of the article.The abstract of the article.The abstract of the article.The abstract of the article.The abstract of the article.The abstract of the article.The abstract of the article.The abstract of the article.The abstract of the article.The abstract of the article.The abstract of the article.The abstract of the article.The abstract of the article.
</p>
<i> Palavras-chave:</i> keywords, comma-separated, not capitalized, Java.
</div>


```{r setup, include=FALSE}
library(knitr)
# library(kableExtra)
library(tidyverse)
library(plotly)
library(readxl)
library(pdftools)

opts_chunk$set(message=FALSE, warning=FALSE, comment=NA, echo=FALSE, out.width='100%', out.height='auto', fig.align='center', cache=T)

# opts_knit$set(root.dir = "C:/Users/rafal/Google Drive/LAMFO/AutomationJobs")
opts_knit$set(root.dir = "C:/Users/B2657804/Google Drive/LAMFO/AutomationJobs")

# A function for captioning and referencing images
fig <- local({
    i <- 0
    ref <- list()
    list(
        cap=function(refName, text) {
            i <<- i + 1
            ref[[refName]] <<- i
            paste("Figura ", i, ": ", text, sep="")
        },
        ref=function(refName) {
            ref[[refName]]
        })
})
```


<center style="padding-top:55px">
## 1. Introdução 
</center>

O ambiente gerencial tem sofrido mudanças drásticas em sua estrutura funcional devido à inserção de novas tecnologias nas organizações. Algoritmos e automação por meio do Aprendizado de Máquina tornaram-se cada vez mais comuns, principalmente devido à competição entre as firmas por aumentar a produção e reduzir custos.

Nesse sentido, os gestores precisam estar cientes dessas novas tecnologias e de como suas organizações podem se beneficiar da implementação desses sistemas. Consequentemente, uma mudança no paradigma de negócios e na maneira pela qual a contratação de funcionários, ou a substituição destes por máquinas, é o objeto de estudo deste trabalho.

A automação tornou-se o maior receio das pessoas empregadas nos últimos anos, tanto nos países desenvolvidos quanto nos subdesenvolvidos. Há uma preocupação extensa hoje em dia de que as tecnologias oriundas do Aprendizado de Máquina criem desemprego em massa durante os próximos anos.

Por exemplo, em março de 2018, os funcionários da Empresa Brasileira de Correios e Telégrafos declararam greve. Uma das demandas dos grevistas foi o retorno de um cargo eliminado pela gerência do órgão, o qual era responsável por selecionar e verificar manualmente cada pacote/carta e depois separar esses pacotes segundo o destino [@Cavallini2018]. Essa demanda foi motivada após os ocupantes desses cargos terem sido demitidos ou realocados em outras tarefas após a automatização no processo de produção dos Correios. A era da automação do Brasil se alinha com os achados de @david2015there, sobre a perfeita substituibilidade entre o desempenho humano em nível mediano e a tecnologia atualmente disponível.

Outra situação semelhante que poderia ser evitada com a automação foi a greve dos caminhoneiros 2018 do Brasil. Essa paralisação nacional de estradas causou uma escassez de alimentos, medicamentos e petróleo em todo o Brasil, com longas filas de veículos para postos de gasolina [@bloomberg].

Além disso, o grande e pesado governo brasileiro, com sua cultura de paternalismo e ineficiência do @worldbank2017, está se tornando uma grande oportunidade para a substituição de muitos trabalhos manuais rotineiros realizados no setor público @david2015there. Dessa forma, é natural o surgimento de resistência contra o uso de máquinas de sindicatos e associações.

Para monitorar essa recente mudança de paradigma no mercado de trabalho dos EUA @dvorkin2016jobs apresentou a evolução de quatro tipos de trabalhos: manual rotineiro; manual não rotineiro; cognitivo rotineiro; cognitivo não rotineiro. Em seu artigo @dvorkin2016jobs mostra que o número de empregos rotineiros manuais e rotineiros cognitivos não está crescendo tão rápido quanto possível, e uma explicação para isso é o nível de automação que está aumentando nos últimos anos. Essa diferença entre os quatro tipos de empregos pode produzir, em um futuro próximo, mais desigualdade e desemprego no Brasil se nenhuma política pública for tomada.

Uma questão que é continuamente investigada é se as novas tecnologias são realmente responsáveis por uma década de baixo crescimento de empregos no Brasil e no mundo. Segundo @rotman2013technology, muitos economistas alegam que os resultados produzidos nos últimos anos são inconclusivos, pois há várias outras explicações plausíveis, como crises financeiras, por exemplo.

Por outro lado, @frey2017future, postulam que todas as ocupações, em vez de
tarefas únicas, são automatizadas por avanços tecnológicos. Em seu artigo, eles descobriram que 47% de todos os empregos nos EUA podem estar em risco de serem automatizados em um futuro próximo. Seu ponto de vista foi mais pessimista do que outros autores, entretanto, é o artigo mais citado sobre o tema na atualidade.

Os autores focaram nos avanços tecnológicos no que eles chamam de Aprendizado de Máquina - AM. Sua suposição é que essa era organizacional na qual vivemos é diferente de outras revoluções tecnológicas, isso porque agora as máquinas são capazes de realizar tarefas que até recentemente eram consideradas genuinamente humanas, como tarefas manuais rotineiras, bem como as não-rotineiras.

@brynjolfsson2014second estão de acordo com @frey2017future. Eles sugerem que, devido à automação de algumas tarefas cognitivas rotineiras, as novas tecnologias podem cada vez mais, servir de substitutos e não apenas de complemento aos trabalhadores que realizam essas tarefas.

No paradigma otimista @alexopoulos2016medium, por exemplo, afirmam que os choques tecnológicos historicamente positivos aumentaram as oportunidades de emprego. Dessa forma, a automação poderia, a longo prazo, ser boa para toda a economia.

Além disso, os métodos de AM são tão bons quanto sua amostra de treinamento e devem considerar grandes conjuntos de dados com milhares de exemplos disponíveis para que a qualidade da máquina desenvolvida seja suficientemente boa. A qualidade dos dados na maioria das empresas dos países subdesenvolvidos é muito baixa, ou ainda, essas firmas não registram seus dados. Isto torna impossível automatizar as tarefas, visto que não há dados e quando há estes estão muito ruins.

Baseado nesse cenário, este estudo contribui para a literatura internacional sobre automação e emprego, estudando a evolução do número de postos de trabalho no Brasil ao longo do tempo e espaço relacionados com o grau de automação, utilizando para isso as classes construídas pelo Departamento de Trabalho dos EUA [@onet].

Nosso objetivo é responder algumas questões com relação à taxa de aumento (ou diminuição) de tipos de trabalhos classificados pelo grau de automação de cada posição. Especificamente, apresentamos qual zona de trabalho apresenta o maior aumento e menor decréscimo no número de posições no Brasil, também utilizando o Sistema de Informações Geográficas (SIG) estudamos essa evolução no espaço localizando aglomerados espaciais de aumento e diminuição dessas posições no Brasil. microrregiões.

<!-- --- -->

<center style="padding-top:55px">
## 2. Referências 
</center>

O estudo sobre automação e digitalização e como esses cenários podem afetar os empregos em todo o mundo é continuamente atualizado ano a ano. Esta declaração está de acordo com o que foi dito por @raj2018ai. @raj2018ai afirma que o atual corpo de literatura empírica em torno da robótica e adoção de Machine Learning pelas organizações está crescendo e muitas vezes tentando responder a perguntas semelhantes: Será que a automação será o fim do trabalho tradicional? Algumas discrepâncias, no entanto, foram encontradas em vários estudos e essas discrepâncias evidenciam a necessidade de novas investigações, artigos de replicação e dados mais completos e detalhados.

Além disso, esses novos avanços tecnológicos levaram tanto à motivação sobre a capacidade dos algoritmos de Aprendizado de Máquina quanto à automação para impulsionar o crescimento econômico e também a preocupação com o destino dos trabalhadores humanos em um mundo no qual os algoritmos de computador podem executar muitas das funções humanas [@furman2016time]. Nesse sentido, @raj2018ai relatou que pesquisas acadêmicas recentes sugerem que automação e robótica podem ter sido responsáveis por cerca de um décimo do aumento do Produto Interno Bruto (PIB) dos EUA entre 1993 e 2007 [@graetz2017modern] mas também uma diminuição no número de postos de trabalho [@frey2017future].

@ramaswamy2018technological define automação quando uma máquina faz trabalho que poderia ter sido realizado anteriormente por uma pessoa, e hoje em dia, a maioria das tarefas manuais rotineiras, manuais não rotineiros e alguns tipos de tarefas rotineiras cognitivas e não rotineiras podem ser automatizados. @autor2003skill apresentou como a adoção rápida de tecnologias de computação altera as tarefas executadas pelos trabalhadores em seus trabalhos. Outra definição é dada por @chui2015four que avaliou o "automatismo" dessas capacidades através do uso de tecnologia atual de ponta, ajustando o nível de capacidade requerido para ocupações onde o trabalho ocorre em configurações imprevisíveis.

Os principais artigos sobre este tema relatados pela literatura científica são os trabalhos de @frey2013future e @frey2017future. @frey2017future estimou a suscetibilidade do emprego à informatização. Em seu artigo, os autores classificam as ocupações nos EUA com relação ao risco de serem suscetíveis à automação, perguntando aos especialistas sobre o potencial tecnológico de automação em um futuro próximo e aplicando um Classificador de Processo Gaussiano para 702 ocupações. Isso foi realizado através da classificação a priori, de algumas ocupações rotuladas por especialistas e a extrapolação da probabilidade para todos os dados. Como resultado, @frey2017future relatou que 47% de todas as pessoas empregadas nos EUA estão trabalhando em trabalhos que poderiam ser executados por computadores nos próximos 10 a 20 anos.

Uma ideia semelhante à proposta por @frey2017future foi aplicada a outros países. @pajarinen2014computerization sugere que 35,7% dos empregos na Finlândia estão sob alto risco para automação, @diba2015roboter estima que a parcela de empregos sob risco de automação chegue a 59% na Alemanha, @bowles2014computerisation encontra que a parcela de postos de trabalho que são suscetíveis à automação na Europa varia entre 45% à mais de 60% e @arntz2016risk estimou a automatização do trabalho dos 21 países da Organização para Cooperação e Desenvolvimento Econômico (OCDE).

Em nossa perspectiva, o mais abrangente o trabalho sobre o tema é devido a @arntz2016risk. Em seu artigo, os autores levam em conta a heterogeneidade das tarefas dos trabalhadores nas ocupações e descobriram que, em média, nos 21 países da OCDE, 9% dos empregos são automatizáveis. No entanto, os autores encontraram heterogeneidade entre os países da OCDE e destacaram que, enquanto a parcela de empregos automatizáveis é 6% na Coréia, a participação correspondente é de 12% na Áustria, essa diferença de acordo com os autores pode ser um reflexo das diferenças gerais das organizações de trabalho, ou devido ao nível educacional desses trabalhadores em todos os países. @arntz2016risk de fato não estudou o Brasil, o qual não é mebro da OCDE. Dessa forma, há a possibilidade de atender a uma lacuna nesse campo de estudo usando dados nacionais.

@arntz2016risk também constatou que, apesar das diferenças, a principal característica de todos os países da OCDE é que a capacidade de automação frequentemente diminui com o nível de educação bem como a renda dos trabalhadores. Para todos os tipos de empregados, @arntz2016risk sugerem que os indivíduos de baixa qualificação e renda são os que enfrentam um maior risco de terem seus postos de trabalho automatizáveis, este resultado é concordante com os achados @bakhshi2015creativity. 

@goos2014explaining e @david2013growth descobriram que nos EUA e na Europa tem sido a "polarização" do emprego por nível de habilidade a principal causa da desigualdade na renda salarial entre todos os tipos de ocupações.

@acemoglu2017robots examinam o impacto do aumento da automação industrial nos mercados de trabalho dos EUA entre 1990 e 2007. Os autores descobriram que a automação nos Estados Unidos está negativamente correlacionada com emprego e salários durante 1990 e 2007. @acemoglu2017robots também estimaram que cada máquina adicional reduziu o emprego em seis trabalhadores e que um novo robô por mil trabalhadores reduziu os salários em 0,5%. Este efeito, de acordo com os autores, é mais pronunciado na manufatura, particularmente em ocupações manuais e manuais de rotina (tarefas rotineiras cognitivas) e para trabalhadores sem diploma universitário.

Na mesma direção, @bessen2018ai afirma que no setor de manufatura, a tecnologia reduziu drasticamente os empregos nas últimas décadas. O autor apresentou um modelo de demanda o qual previa a ascensão e queda do emprego nas indústrias têxtil, siderúrgica e automobilística. Estes setores eram os mais vulneráveis no que diz respeito à automatização. 

@furman2018should, por exemplo, argumenta que apesar da tecnologia gerar novas demandas de consumo e consequentemente novos empregos, a rotatividade causada pela automação poderia levar a períodos de alto desemprego. Isto pode ser fatal para a economia dos países.

@ramaswamy2018technological resume a maioria das descobertas deste tema:

1. O aumento da automação e adoção de robôs não parece causar perda de emprego no conjunto de textos sobre o tema.

2. Trabalhadores pouco qualificados em trabalhos de rotina são mais propensos a sofrer demissões devido a automação de suas tarefas. Em que, os trabalhadores pouco qualificados são aqueles que realizam tarefas orientadas por processos de entrada simples com pouco pensamento abstrato.

3. Haverá demanda por novos tipos de trabalhadores qualificados ou novas especializações dentro de ocupações, e trabalhadores de alta habilidade que sejam capazes de realizar tarefas complicadas que requerem experiência, especialização, pensamento abstrato e autonomia.


@ramaswamy2018technological argumenta que o risco de automação de trabalho em países em desenvolvimento varia entre países, por exemplo, o autor afirma que é estimado para variar de 55% no Uzbequistão até 85% na Etiópia. Nas economias emergentes, estima-se que o risco de automação seja relativamente alto, com 77% de empregos na China e 69% na Índia considerados em risco. 

Enquanto a maioria dos estudos utilizou a descrição das ocupações e algumas opiniões de especialistas, @mann2017benign adotou uma abordagem diferente para analisar os efeitos da automação no emprego. Em seu estudo, os autores utilizaram em informações fornecidas por patentes concedidas. @mann2017benign aplicou um algoritmo classificador de Aprendizado de Máquina a todas as 5 milhões de patentes concedidas entre 1976 e 2014 para identificar patentes relacionadas à automação com base em uma amostra de 560 patentes classificadas manualmente para classificar patentes em inovações de automação e não-automação. @mann2017benign concluiram que, embora a automação reduza o emprego industrial, aumenta o emprego no setor de serviços e, em geral, tem um impacto positivo no emprego. Na mesma direção, @susskind2017model argumenta que o número de tarefas que os robôs podem substituir pode ser ainda muito maior.


Outro trabalho que apresenta uma visão geral otimista do tema é o artigo de @bessen2017automation. O autor descobriu que as novas tecnologias devem ter um efeito positivo no emprego, se melhorarem a produtividade em mercados onde há uma grande quantidade de demanda reprimida. Ele também sugere que a nova tecnologia de computadores está associada a declínios de emprego na indústria, onde a demanda é geralmente alcançada, mas está correlacionada com o crescimento do emprego em indústrias menos saturadas e não-manufatureiras. 

Outro trabalho que apresenta uma visão otimista do tema é o artigo de @bessen2017automation. Segundo o autor, as novas tecnologias devem ter um efeito positivo sobre o emprego se melhorarem a produtividade em mercados onde há uma grande quantidade de demanda reprimida. Também é sugerido que a nova tecnologia está associada ao declínio do emprego na indústria manufaturada, onde a demanda está correlacionada ao crescimento do emprego em indústrias menos saturadas e não manufatureiras.

De acordo com @furman2018should, uma vez que a automatização pode reduzir o número de postos de trabalho para os empregos menos qualificados, isso também pode implicar em um declínio da demanda por empregos mais qualificados. Por outro lado, tarefas mais qualificadas que usam capacidades de resolução de problemas, criatividade e intuição (tarefas cognitivas não-rotineiras), assim como tarefas de baixa qualificação que exigem adaptabilidade situacional e interações pessoais (cognitiva de rotina), são menos propensas a serem automatizados.

Com relação à revisão de literatura, podemos observar que cenários otimistas e pessimistas são possíveis. Se assumirmos que as máquinas só podem ser substitutas de tarefas de rotina [@acemoglu2011skills], então o resultado provavelmente será otimista ou menos pessimista. Isto é explicado por @acemoglu2016race, que argumenta que isto é devido a duas razões: primeiro, porque sempre haverá classes de ocupações que não serão totalmente automatizadas, e segundo, sempre é possível a introdução de novas tarefas em que o trabalho tem uma vantagem comparativa, como apontado por @acemoglu2016race. Isto pode compensar a perda de ocupações devido à automação.

Nenhum dos artigos citados estudou o Brasil e o impacto de uma crise econômica no número de postos de trabalho classificados pelo nível de complexidade ou probabilidade de automatização. Assim, propusemo-nos a estimar a probabilidade de automação da Classificação Brasileira de Ocupações - CBO, associando essa probabilidade com a classificação de zonas de trabalho (*Job Zones*) do O\*NET. Também é medido o efeito da crise econômica brasileira de 2015-2018 no número de postos de trabalho para os cinco *Job Zones* definidos pelo sistema de classificação O\*NET.

<center style="padding-top:55px">
## 3. Metodologia 
</center>

The dataset used in this analysis was the Brazilian Annual Social Information Report (<i>Relação Anual de Informações Sociais</i> - RAIS). RAIS is an annual administrative record conceived to supply the necessities of control, and information for governmental entities aiming to subsidize public policies by tracking the formal labor market in Brazil.

RAIS is a panel dataset that covers 97% of the Brazilian formal market for the years of 1986 to 2016 and it contains mostly of the formal employees with their income, level of education, age, CBO, firm identification, National Classification of Economic Activities (<i>Classificação Nacional de Atividades Econômicas</i> - CNAE) of the firms and many other variables such as municipality, legal nature and job tenure of employees.

The first step of our analysis was to join the O\*NET Job Zone classification into the RAIS dataset for each CBO. The O*NET database presents 1,122 occupational groups and provides definitions and concepts for describing worker attributes such as skills, education and also a 5 level Job Zone that classify jobs according to their preparation level:

1. Job Zone 1 - occupations that need little or no preparation.
2. Job Zone 2 - occupations that need some preparation.
3. Job Zone 3 - occupations that need medium preparation.
4. Job Zone 4 - occupations that need considerable preparation.
5. Job Zone 5 - occupations that need extensive preparation.


The idea was use the Job Zone classification as a proxy of the probability of computerisation for each CBO across the years in the RAIS dataset. Indeed, there is a negative relationship between the Job Zone classification and the probability of computerisation presented in the O*NET database as pointed by Figura 1.


```{r fig1, fig.cap=fig$cap("fig2", "Probabilidade de informatização por Job Zone")}
pdf <- pdf_text("https://www.oxfordmartin.ox.ac.uk/downloads/academic/future-of-employment.pdf")
pdf <- paste0(pdf, collapse = " ")
pattern <- "Rank\\s+Probability(.)*Telemarketers"
extract <- regmatches(pdf, regexpr(pattern, pdf))
extract <- unlist(strsplit(extract, "\r\n"))
FO <- read.fwf(con <- textConnection(extract), widths = c(7, 13, 6, 9, 80))
close(con)

FO <- FO %>% filter(grepl(".\\d", V2)) %>%
  mutate(rank = as.numeric(gsub(" ", "", V1)),
         prob = as.numeric(gsub(" ", "", V2)),
         soc  = as.character(gsub(" ", "",V4)),
         ocup = as.character(V5)) %>% select(-(V1:V5))

Job_Zones <- readxl::read_excel("Data/All_Job_Zones.xlsx", 
                                skip = 3, col_types = "text") %>% 
  mutate(Code = substr(Code,1,7)) %>% 
  rename(Job_Zone = `Job Zone`) %>% distinct(Job_Zone, Code) 

che <- Job_Zones %>% group_by(Code) %>% summarise(freq = n())

Job_Zones <- Job_Zones %>% filter(Code %in% filter(che, freq==1)$Code )

Comp <- full_join(FO, Job_Zones, by = c("soc" = "Code"))
Comp <- Comp %>% na.omit()

a <- ggplot(aes(y = prob, x = Job_Zone), data = Comp) + geom_boxplot(fill = "gray") +
  theme_bw() + labs(x = "Job Zone", y = "Probabilidade de informatização") +
  theme(text = element_text(size=15))

ggplotly(a)
```

The Figura 1 presents the probability of computerisation of occupations according to the Job Zones. The probabilities were obtained from @frey2017future and the correspondence was given by the 2010 Standard Occupational Classification - SOC. Based on the Figura 1 we can note that as more complex is an occupation in terms of level of preparation, less is the probability of computerisation of these occupations.

Since there is no official table available to correspond the CBO to Job Zones provided by the O*NET we assigned the Job Zones to the Brazilian occupational code using the follow steps:  first we used the CBO version 2002 which is the most recent occupational code in Brazil [@MTE]. Then, these codes were linked to the International Standard Classification of Occupations - @ISCO, version 88 which has a straight matching given from @MTE. Once obtained the joined dataset we updated the ISCO-88 to ISCO-08 and then it was possible to crosswalk between the 2008 International Standard Classification of Occupations to the 2010 using @SOC conversion tables. Finally, @ONET_ provides the correspondence between Job Zones and SOC 2010.

After this procedure we found Job Zones for 73% of CBOs, but while O*NET database presents 1,122 occupational groups the RAIS has 2,602 occupational groups and because of that some occupational codes presented more than one correspondence.

For the 27% remained we filled 8% of the occupational codes using the translation between the occupational names from English to Portuguese and matching the codes by text merge based in a similarity measure. This measure is expressed in the range between $[0, 1]$ and is given by the ratio of twice the number of elements common to words and the total of elements of both texts. The remaining 19% were filled by manual inspection of the authors evaluating the level of preparation for each code based on the occupational code's description.

Next, we calculate the expected number of employees for each Job Zone throughout the year. Mathematically, let $W_{i,t}$ be the number of workers in the $i$-th CBO and $t$-year and $\pi_{i,j,t}$ the percent of times for the $i$-th CBO time $t$ classified as Job Zone $j$ the expected number of employees for each Job Zone throughout the year was given by:


$$E_{j,t} = W_{i,t} \pi_{i,j,t} $$


\noindent for $j=1,\dots,5$. However, since the number of workers in each Job Zone is very different, we choose to work with the Cumulative Growth Rate (CGR) to be able to compare the magnitude of the increase (or decrease) over time, specifically the Cumulative Growth Rate was computed as:

$$G_{j,t} = \displaystyle\sum_{t_{0}=1}^{t}\left[\frac{E_{j,t_{0}}}{E_{j,t_{0}-1}}-E_{j,t_{0}-1}\right]$$


\noindent where $t_{0}=1$ represents the second year of our time series, the year of 1988.

The Figura 2 presents the Cumulative Growth Rate for the expected number of employees for each Job Zone and also the Cumulative Growth Rate for the Brazilian Gross domestic product (GDP) starting the series from 1987.


```{r fig2, fig.cap=fig$cap("fig1", "plotting example")}
jobzone_painel <- read.csv2("./Data/jobzone_painel.csv")

serie <- jobzone_painel %>% 
  group_by(ano,Job_Zone) %>% 
  summarise(empreg = sum(empregados)) %>%
  na.omit()

graph01.tbl2 <- serie %>%
  group_by(Job_Zone) %>%
  mutate(lag = lag(empreg)) %>%
  mutate(pct.change = (empreg - lag) / lag) %>% 
  na.omit()

graph01.tbl <- graph01.tbl2 %>%
  group_by(Job_Zone) %>%
  mutate(cumulative= cumprod(1 + pct.change) - 1) %>% 
  rename(year = ano)

graph01.tbl <- graph01.tbl %>%
  ungroup() %>% 
  mutate(Job_Zone = as.character(Job_Zone))



GDP_GROWTH <- read_excel("Data/GDP_GROWTH.xls", skip = 3)
GDP_GROWTH <- GDP_GROWTH %>% filter(`Country Name` == "Brazil") %>% gather(year, growth) %>%
  filter(year %in% 1986:2016) %>% mutate(growth     = as.numeric(growth),
                                         cumulative = (cumprod(growth/100 + 1) - 1))

GDP_GROWTH2<-GDP_GROWTH %>% 
  mutate(Job_Zone="GDP",
         year = as.numeric(year)) %>% 
  select(-growth)


final<-bind_rows(graph01.tbl,GDP_GROWTH2)
final<-subset(final,year>1986)

mycolors <- RColorBrewer::brewer.pal(5, "Pastel1")
mycolors<-c(mycolors, "#000000")

g <- final %>% mutate(cumulative = round(cumulative,2)) %>% 
  select(year, Job_Zone, cumulative) %>% spread(Job_Zone, cumulative)

p <- plot_ly(g, x=~year, y=~`1`, name = "Job Zone 1", marker=list(color=mycolors[1]), 
             line=list(color=mycolors[1]),type = 'scatter', mode = 'lines+markers') %>% 
  add_trace(y = ~`2`, name = "Job Zone 2", marker=list(color=mycolors[2]), line=list(color=mycolors[2])) %>% 
  add_trace(y = ~`3`, name = "Job Zone 3", marker=list(color=mycolors[3]), line=list(color=mycolors[3])) %>% 
  add_trace(y = ~`4`, name = "Job Zone 4", marker=list(color=mycolors[4]), line=list(color=mycolors[4]))%>% 
  add_trace(y = ~`5`, name = "Job Zone 5", marker=list(color=mycolors[5]), line=list(color=mycolors[5]))%>% 
  add_trace(y = ~GDP, name = "PIB Acumulado", marker=list(color =mycolors[6]), line = list(color =mycolors[6])) %>%
  layout( legend = list(orientation = 'h'), xaxis = list(title = " "),
          yaxis = list(title = "Taxa de Crescimento Acumulado"), hovermode = "compare")
p
  


```

If we believe that automation is eliminating job positions, especially for the first Job Zones class, we should expect that the Cumulative Growth Rate were larger for the Level 5, follow by Level 4, Level 3, Level 2 and then Level 1. But interestingly, this pattern did not occur. The highest growth class in recent years was the Level 1 which was associated with the occupations that need little or no preparation.

The other Job Zones series followed the expected pattern: Level 5, followed by Level 4, Level 3, Level 2 in that order. The first question that arises is why the Level 1 had the highest increase over time ? One possible answer may be due to the fact that workers in the intermediate classes are migrating to Level 1, due to a lack of jobs in the areas that require more training, or due to the unemployment rate that has remained high in Brazil in last years. To confirm this hypothesis we tracked the workers through the years to measure the number of changes for each Job Zone class as presented by the Tabela 1:


```{r tab1}
tab1 <- readr::read_delim("Paper_HTML/Tables/table1.txt", delim = "&")
tab1 <- tab1 %>% mutate_at(-1, as.numeric)

kable(tab1, caption = " ", format.args = list(decimal.mark = ","),booktabs=TRUE)
```

<center style="padding-bottom:20px;">Tabela 1: Percent of change between levels to level 1 over the years.</center>

Another question that arises is: Does the decrease of the GDP due to the Brazilian financial crisis reduce in the same manner the Cumulative Growth Rate for all the Job Zones class ?

This question is motivated because of the recent Brazilian financial crisis that was coupled with a political crisis in Brazil that resulted in the impeachment of president Dilma Rousseff and in widespread dissatisfaction with the political system.

After 2014 Brazil's gross domestic product (GDP) fell by 3.9% due to a drop in salaries, restrictions on credit and a rise in the basic interest rate. In 2016, Brazil's GDP fell by 3.6% with reductions across all sectors of the economy and the effect of these drops in the GDP can be clear noted by the Figura 2 where the Cumulative Growth Rate for the Job Zones also dropped with the follow magnitude:

```{r tab2}
tab2 <-  readr::read_delim(
"Job Zone & Percentage
Level 1  & 31,4475%
Level 2  & 17,9420%
Level 3  & 14,4177%
Level 4  & 16,0446%
Level 5  & 7,5201%", delim = "&")

kable(tab2, caption = " ")
```

<center style="padding-bottom:20px;">Tabela 2: Fall percentage from  2014 to 2016 in the CGR.</center>


The Tabela 2 shows that the percentage decrease in the number of job positions for the Level 1 was almost twice the decrease of the other Job Zones levels, also, the Level 5 which is related with the occupations that have less probability of computerisation had the lowest decrease in the number of job positions during the Brazilian financial crisis.


### 3.1. Pesquisa sobre automação de empregos

Using a similar idea as proposed by @frey2017future we collected from Lattes Platform[^1] the name of all researchers that worked in  projects related to machine-learning (and was found by a search using this exact phrase).


<!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
[^1]:The Lattes Platform is an information system maintained by the Brazilian Government to manage information on science, technology, and innovation related to individual researchers working in Brazil.
<!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

During this process we found 754 e-mails for the researchers reported by Lattes Platform. We then invited this professionals to evaluate some random CBO's with respect to their activity's description based on the researcher's experience.

The final dataset was composed by 3966 answers from 69 researchers and 2046 CBO's in a population with 2601 total CBO's, also each respondent evaluated in average 57.48 randomly unique CBO's.

The sample was stratified by the following fields:

```{r tab3}
tab3 <-  readr::read_delim(
"Science           & Answers & Researchers
Applied sciences  & 3489    & 58
Interdisciplinary & 29      & 2 
Business          & 228     & 2 
Physical sciences & 220     & 7 ", delim = "&")


kable(tab3, caption = " ")
```

<center style="padding-bottom:20px;">Tabela 3: Fields and researchers' answers in the survey.</center>


To estimate the probability of computerisation by CBO we joined the survey dataset with a structured dataset with the absolute frequency of the unigrams and bigrams related to the activity's description of CBO's. 

These unigrams and bigrams were obtained after remove from the activity's description of CBO's the stop-words, numbers and punctuation and keeping only the unigrams and bigrams with a coefficient of variation based on the frequency larger than 2.0,  totalizing 92 variables with the number of times that the unigrams or bigrams is presented in the activity's description of CBO's.

The last step to estimate the probability of computerisation by CBO was to train and forecast a Gaussian Process with Automatic Relevance Determination (ARD), in other words, since we had 92 variables to describe 3801 probabilities we used the ARD to regularize the Gaussian Process and avoid the over-fitting.

Let $\mathbf{x}_{i}$ and $\mathbf{x}_{j}$ two observations with $i,j=1,\dots, 3801$ and $\mathbf{x}_{i},\mathbf{x}_{j}\in \mathbb{R}^{P}$ with $P=92$, the ARD was fitted considering the following kernel function:

$$K(\mathbf{x}_{i},\mathbf{x}_{j})_{\boldsymbol\theta}=\sigma_{f}^{2}\exp\left[-\frac{1}{2}\displaystyle\sum_{p=1}^{P}\left(\frac{x_{ip}-x_{jp}}{\lambda_{p}}\right)^{2}\right]$$


\noindent where $\boldsymbol\theta=(\sigma_{f}^{2},\sigma_{\epsilon}^{2},\lambda_{1},\dots,\lambda_{P})$. It is important to note that when $\lambda_{p}\rightarrow \infty$ the predicted function varies less and less as a function of $x_{ip},x_{jp}$, that is, the $p$-th dimension becomes irrelevant to estimate the probability of computerisation, in the other hand, $\lambda_{p}\rightarrow 0$ will weight more the distance between $x_{ip}$ and $x_{jp}$ in the data generating process estimation.
The hyperparameters $\boldsymbol\theta$ were found by maximizing the Marginal Likelihood [@schulz2018tutorial]:

$$\log[p(\mathbf{y}|\mathbf{X},\boldsymbol\theta)]=-\frac{1}{2}\mathbf{y}^{\top}\mathbf{K}_{y}\mathbf{y}-\frac{1}{2}|\mathbf{K}_{y}|-\frac{n}{2}\log(2\pi)$$

\noindent where $\mathbf{K}_{y}=K(\mathbf{X},\mathbf{X})+\sigma_{\epsilon}^{2}\mathbf{I}$, $(\mathbf{y}$ is the probability of computerisation obtained from the survey, $\mathbf{X}$ is the unigram and bigram frequency matrix and $n=3801$ is the sample size.

Finally, using multivariate posterior density we obtained the  predictive equations for Gaussian Process Regression [@rasmussen2004gaussian]:

$$\mathbf{f}_{*}|\mathbf{X},\mathbf{y},\mathbf{X}_{*}\sim N(\overline{\mathbf{f}}_{*},Cov(\mathbf{f}_{*}))$$
\noindent where $\overline{\mathbf{f}}_{*}=K(\mathbf{X}_{*},\mathbf{X})[K(\mathbf{X},\mathbf{X})+\sigma_{\epsilon}^{2}\mathbf{I}]^{-1}\mathbf{y}$ and $Cov(\mathbf{f}_{*})=K(\mathbf{X}_{*},\mathbf{X}_{*})-K(\mathbf{X}_{*},\mathbf{X})[K(\mathbf{X},\mathbf{X})+\sigma_{\epsilon}^{2}\mathbf{I}]^{-1}K(\mathbf{X},\mathbf{X}_{*})$ with $\mathbf{X}_{*}$ being the unigram and bigram frequency matrix of all observations, including the CBO's without answer in the survey. 


<center style="padding-top:55px">
## 4. Resultados 
</center>

Simulating 5000 observations from Density \ref{eq:normal} we obtained the empirical estimated distribution of the probability of computerisation for each CBO.

@arntz2016risk However, low qualified workers are likely to bear the brunt of the adjustment costs as the automatibility of their jobs is higher compared to highly qualified workers. Therefore, the likely challenge for the future lies in coping with rising inequality and ensuring sufficient (re-)training especially for low qualified workers. However, education plays a large role for many countries. In most countries, the within-education component is negative, which implies that people with the same education typically perform less automatable tasks compared to the US. However, in many countries the between-education component is positive, which implies that in those countries a larger share of workers has educational levels which are associated with more automatable tasks (i.e. low or medium qualified workers).

Furthermore, even if sufficiently qualified personnel were available, firms decide on investing in new technologies depending on the relative factor prices of capital and labour in performing a certain task in the production process.

@graetz2017modern discuss recession and automazation.

<font color="red"> @bessen2018ai

Of course, job losses in one industry might be offset by employment growth in other industries. (**Explicação para as Job Zones intermediárias serem jogadas na primeira**)

</font>



## Referências Bibliográficas
<div id="refs"></div>



## Afiliação

</div>


```{r save}
saveRDS(ggplotly(a), "Box_Paper.RDS")
saveRDS(p, "Serie_Paper.RDS")
```

